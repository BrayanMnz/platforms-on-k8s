(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{3618:function(e,t,n){Promise.resolve().then(n.bind(n,5433))},5433:function(e,t,n){"use strict";let s;n.r(t),n.d(t,{default:function(){return F}});var r=n(9268),l=n(3637),a=n.n(l),c=n(6006),i=n(9508),o=function(e){let{title:t,author:n,id:s,status:l,approved:a,email:c,description:o,actionHandler:d}=e,u=(e,t,n)=>{d(t,e,n)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"ProposalItem__header",children:[(0,r.jsx)("h3",{children:t}),(0,r.jsxs)("h5",{children:[n," ",c]}),(0,r.jsx)("div",{className:"ProposalItem__status",children:l})]}),(0,r.jsx)("div",{className:"ProposalItem__description",children:(0,r.jsx)("p",{className:"p p-s",children:o})}),!1,l&&"PENDING"===l&&(0,r.jsxs)("div",{className:"ProposalItem__actions",children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.default,{clickHandler:()=>u(s,l,"APPROVE"),children:"Approve"})}),(0,r.jsx)("div",{children:(0,r.jsx)(i.default,{clickHandler:()=>u(s,l,"REJECT"),children:"Reject"})})]}),l&&"DECIDED"===l&&(0,r.jsxs)("div",{className:"ProposalItem__status-info",children:[!0===a&&(0,r.jsx)("div",{className:"ProposalItem__badge --approved",children:"Approved"}),!1===a&&(0,r.jsx)("div",{className:"ProposalItem__badge --rejected",children:"Rejected"})]})]})},d=function(){let[e,t]=(0,c.useState)(!1),[n,s]=(0,c.useState)(!1),[l,a]=(0,c.useState)(!1),[d,u]=(0,c.useState)([]),f=(e,n)=>{t(!0),s(!1),console.log("Decision Made ..."),fetch("/api/c4p/"+e+"/decide",{method:"POST",body:JSON.stringify({approved:n}),headers:{accept:"application/json"}}).then(e=>e.json()).then(e=>{var n="?status="+l;""==l&&(n=""),p(n),t(!1)}).catch(e=>{t(!1),s(!0)})};function h(e,t,n){"PENDING"==e&&("APPROVE"==n?f(t,!0):f(t,!1))}let p=e=>{fetch("/api/c4p/"+e).then(e=>e.json()).then(e=>{console.log("Fetching Proposals ..."),u(e),t(!1)}).catch(e=>{console.log(e)})};return(0,c.useEffect)(()=>{t(!0);var e="?status="+l;""==l&&(e=""),p(e)},[l]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"ProposalList__filters",children:["Filter By:",(0,r.jsx)(i.default,{inverted:!0,state:""==l?"inactive":"active",clickHandler:()=>void a(""),children:"All"}),(0,r.jsx)(i.default,{inverted:!0,state:"PENDING"==l?"active":"inactive",clickHandler:()=>void a("PENDING"),children:"Pending"}),(0,r.jsx)(i.default,{inverted:!0,state:"DECIDED"==l?"active":"inactive",clickHandler:()=>void a("DECIDED"),children:"Decided"})]}),(0,r.jsxs)("div",{children:[d&&d.map((e,t)=>(0,r.jsx)(o,{id:e.Id,title:e.Title,author:e.Author,description:e.Description,email:e.Email,approved:e.Approved,status:e.Status.Status,actionHandler:h},e.Id)),d&&0===d.length&&"PENDING"===l&&(0,r.jsx)("span",{children:"There are no pending proposals."}),d&&0===d.length&&"DECIDED"===l&&(0,r.jsx)("span",{children:"There are no decided proposals."}),d&&0===d.length&&!1===l&&(0,r.jsx)("span",{children:"There are no proposals."})]})]})},u=function(e){let{id:t,title:n,emailTo:s,emailSubject:l,emailBody:a,approved:c}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"ProposalItem__header",children:[(0,r.jsxs)("h3",{children:["Proposal: ",n]}),(0,r.jsxs)("div",{className:"ProposalItem__status",children:["Approved? ",c]})]}),(0,r.jsxs)("div",{className:"ProposalItem__description",children:["To: ",(0,r.jsx)("p",{className:"p p-s",children:s}),"Subject: ",(0,r.jsx)("p",{className:"p p-s",children:l}),"Body: ",(0,r.jsx)("p",{className:"p p-s",children:a})]})]})},f=function(){let[e,t]=(0,c.useState)(!1),[n,s]=(0,c.useState)(!1),[l,a]=(0,c.useState)([]),[i,o]=(0,c.useState)(0),d=()=>{fetch("/api/notifications/").then(e=>e.json()).then(e=>{console.log("Fetching Notifications ..."),a(e),t(!1)}).catch(e=>{console.log(e)})};return(0,c.useEffect)(()=>{let e=setInterval(()=>{t(!0),d()},3e3);return()=>clearInterval(e)},[i]),(0,c.useEffect)(()=>{t(!0),d()},[]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{children:[l&&l.map((e,t)=>(0,r.jsx)(u,{id:e.Id,title:e.Title,emailTo:e.EmailTo,emailBody:e.EmailBody,emailSubject:e.EmailSubject,approved:e.Approved},e.Id)),l&&0===l.length&&(0,r.jsx)("span",{children:"There are no notifications."})]})})},h=function(e){let{id:t,type:n,payload:s}=e;return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"ProposalItem__header",children:[(0,r.jsx)("h3",{children:t}),(0,r.jsx)("h5",{children:n}),(0,r.jsx)("div",{className:"ProposalItem__status",children:s})]})})},p=function(){let[e,t]=(0,c.useState)(!1),[n,s]=(0,c.useState)(!1),[l,a]=(0,c.useState)([]),[i,o]=(0,c.useState)(0),d=()=>{fetch("/api/events/").then(e=>e.json()).then(e=>{console.log("Fetching Events ..."),a(e),t(!1)}).catch(e=>{console.log(e)})};return(0,c.useEffect)(()=>{t(!0),d()},[]),(0,c.useEffect)(()=>{let e=setInterval(()=>{t(!0),d()},3e3);return()=>clearInterval(e)},[i]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{children:[l&&l.map((e,t)=>(0,r.jsx)(h,{id:e.Id,type:e.Type,payload:e.Payload},e.Id)),l&&0===l.length&&(0,r.jsx)("span",{children:"There are no events."})]})})};function j(e){return t=>!!t.type&&t.type.tabsRole===e}let m=j("Tab"),x=j("TabList"),v=j("TabPanel");function b(e,t){return c.Children.map(e,e=>null===e?null:m(e)||x(e)||v(e)?t(e):e.props&&e.props.children&&"object"==typeof e.props.children?(0,c.cloneElement)(e,{...e.props,children:b(e.props.children,t)}):e)}var N=function(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,s,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(s=e(t[n]))&&(r&&(r+=" "),r+=s);else for(n in t)t[n]&&(r&&(r+=" "),r+=n)}return r}(e))&&(s&&(s+=" "),s+=t);return s};function _(e){let t=0;return!function e(t,n){return c.Children.forEach(t,t=>{null!==t&&(m(t)||v(t)?n(t):t.props&&t.props.children&&"object"==typeof t.props.children&&(x(t)&&n(t),e(t.props.children,n)))})}(e,e=>{m(e)&&t++}),t}function E(e){return e&&"getAttribute"in e}function g(e){return E(e)&&e.getAttribute("data-rttab")}function y(e){return E(e)&&"true"===e.getAttribute("aria-disabled")}let I={className:"react-tabs",focus:!1},C=e=>{let t=(0,c.useRef)([]),n=(0,c.useRef)([]),r=(0,c.useRef)();function l(t,n){if(t<0||t>=o())return;let{onSelect:s,selectedIndex:r}=e;s(t,r,n)}function a(e){let t=o();for(let n=e+1;n<t;n++)if(!y(d(n)))return n;for(let t=0;t<e;t++)if(!y(d(t)))return t;return e}function i(e){let t=e;for(;t--;)if(!y(d(t)))return t;for(t=o();t-- >e;)if(!y(d(t)))return t;return e}function o(){let{children:t}=e;return _(t)}function d(e){return t.current[`tabs-${e}`]}function u(e){let t=e.target;do if(f(t)){if(y(t))return;let n=[].slice.call(t.parentNode.children).filter(g).indexOf(t);l(n,e);return}while(null!=(t=t.parentNode))}function f(e){if(!g(e))return!1;let t=e.parentElement;do{if(t===r.current)return!0;if(t.getAttribute("data-rttabs"))break;t=t.parentElement}while(t);return!1}let{children:h,className:p,disabledTabClassName:j,domRef:E,focus:C,forceRenderTabPanel:P,onSelect:k,selectedIndex:T,selectedTabClassName:D,selectedTabPanelClassName:S,environment:R,disableUpDownKeys:w,disableLeftRightKeys:A,...O}={...I,...e};return c.createElement("div",Object.assign({},O,{className:N(p),onClick:u,onKeyDown:function(t){let{direction:n,disableUpDownKeys:s,disableLeftRightKeys:r}=e;if(f(t.target)){let{selectedIndex:c}=e,f=!1,h=!1;("Space"===t.code||32===t.keyCode||"Enter"===t.code||13===t.keyCode)&&(f=!0,h=!1,u(t)),(r||37!==t.keyCode&&"ArrowLeft"!==t.code)&&(s||38!==t.keyCode&&"ArrowUp"!==t.code)?(r||39!==t.keyCode&&"ArrowRight"!==t.code)&&(s||40!==t.keyCode&&"ArrowDown"!==t.code)?35===t.keyCode||"End"===t.code?(c=function(){let e=o();for(;e--;)if(!y(d(e)))return e;return null}(),f=!0,h=!0):(36===t.keyCode||"Home"===t.code)&&(c=function(){let e=o();for(let t=0;t<e;t++)if(!y(d(t)))return t;return null}(),f=!0,h=!0):(c="rtl"===n?i(c):a(c),f=!0,h=!0):(c="rtl"===n?a(c):i(c),f=!0,h=!0),f&&t.preventDefault(),h&&l(c,t)}},ref:e=>{r.current=e,E&&E(e)},"data-rttabs":!0}),function(){let r=0,{children:l,disabledTabClassName:a,focus:i,forceRenderTabPanel:u,selectedIndex:f,selectedTabClassName:h,selectedTabPanelClassName:p,environment:j}=e;n.current=n.current||[];let N=n.current.length-o(),_=(0,c.useId)();for(;N++<0;)n.current.push(`${_}${n.current.length}`);return b(l,e=>{let l=e;if(x(e)){let r=0,o=!1;null==s&&function(e){let t=e||("undefined"!=typeof window?window:void 0);try{s=!!(void 0!==t&&t.document&&t.document.activeElement)}catch(e){s=!1}}(j);let u=j||("undefined"!=typeof window?window:void 0);s&&u&&(o=c.Children.toArray(e.props.children).filter(m).some((e,t)=>u.document.activeElement===d(t))),l=(0,c.cloneElement)(e,{children:b(e.props.children,e=>{let s=`tabs-${r}`,l=f===r,d={tabRef:e=>{t.current[s]=e},id:n.current[r],selected:l,focus:l&&(i||o)};return h&&(d.selectedClassName=h),a&&(d.disabledClassName=a),r++,(0,c.cloneElement)(e,d)})})}else if(v(e)){let t={id:n.current[r],selected:f===r};u&&(t.forceRender=u),p&&(t.selectedClassName=p),r++,l=(0,c.cloneElement)(e,t)}return l})}())};C.propTypes={};let P={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},k=e=>null===e.selectedIndex?1:0,T=(e,t)=>{},D=e=>{let{children:t,defaultFocus:n,defaultIndex:s,focusTabOnClick:r,onSelect:l,...a}={...P,...e},[i,o]=(0,c.useState)(n),[d]=(0,c.useState)(k(a)),[u,f]=(0,c.useState)(1===d?s||0:null);if((0,c.useEffect)(()=>{o(!1)},[]),1===d){let e=_(t);(0,c.useEffect)(()=>{if(null!=u){let t=Math.max(0,e-1);f(Math.min(u,t))}},[e])}T(a,d);let h={...e,...a};return h.focus=i,h.onSelect=(e,t,n)=>{("function"!=typeof l||!1!==l(e,t,n))&&(r&&o(!0),1===d&&f(e))},null!=u&&(h.selectedIndex=u),delete h.defaultFocus,delete h.defaultIndex,delete h.focusTabOnClick,c.createElement(C,h,t)};D.propTypes={},D.tabsRole="Tabs";let S={className:"react-tabs__tab-list"},R=e=>{let{children:t,className:n,...s}={...S,...e};return c.createElement("ul",Object.assign({},s,{className:N(n),role:"tablist"}),t)};R.tabsRole="TabList",R.propTypes={};let w="react-tabs__tab",A={className:w,disabledClassName:`${w}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${w}--selected`},O=e=>{let t=(0,c.useRef)(),{children:n,className:s,disabled:r,disabledClassName:l,focus:a,id:i,selected:o,selectedClassName:d,tabIndex:u,tabRef:f,...h}={...A,...e};return(0,c.useEffect)(()=>{o&&a&&t.current.focus()},[o,a]),c.createElement("li",Object.assign({},h,{className:N(s,{[d]:o,[l]:r}),ref:e=>{t.current=e,f&&f(e)},role:"tab",id:`tab${i}`,"aria-selected":o?"true":"false","aria-disabled":r?"true":"false","aria-controls":`panel${i}`,tabIndex:u||(o?"0":null),"data-rttab":!0}),n)};O.propTypes={},O.tabsRole="Tab";let $="react-tabs__tab-panel",B={className:$,forceRender:!1,selectedClassName:`${$}--selected`},H=e=>{let{children:t,className:n,forceRender:s,id:r,selected:l,selectedClassName:a,...i}={...B,...e};return c.createElement("div",Object.assign({},i,{className:N(n,{[a]:l}),role:"tabpanel",id:`panel${r}`,"aria-labelledby":`tab${r}`}),s||l?t:null)};function F(){return(0,r.jsxs)("main",{className:a().main,children:[(0,r.jsx)("div",{className:"".concat(a().hero," "),children:(0,r.jsx)("div",{className:"grid content noMargin",children:(0,r.jsx)("div",{className:"col full",children:(0,r.jsx)("h3",{children:"Backoffice"})})})}),(0,r.jsx)("div",{className:"".concat(a().BackofficeContent," "),children:(0,r.jsx)("div",{className:"grid content noMargin",children:(0,r.jsx)("div",{className:"col full",children:(0,r.jsx)("div",{className:"".concat(a().tabs," "),children:(0,r.jsxs)(D,{children:[(0,r.jsxs)(R,{children:[(0,r.jsx)(O,{children:"Review Proposals"}),(0,r.jsx)(O,{children:"Notifications"}),(0,r.jsx)(O,{children:"Events"})]}),(0,r.jsx)(H,{children:(0,r.jsx)(d,{})}),(0,r.jsx)(H,{children:(0,r.jsx)(f,{})}),(0,r.jsx)(H,{children:(0,r.jsx)(p,{})})]})})})})})]})}H.tabsRole="TabPanel",H.propTypes={}},9508:function(e,t,n){"use strict";n.r(t);var s=n(9268),r=n(5942),l=n.n(r),a=n(5846),c=n.n(a);t.default=function(e){var t;let{children:n,link:r,external:a,inline:i,clickHandler:o,small:d,main:u,disabled:f,inverted:h}=e;return t=r?a?(0,s.jsxs)("a",{href:r,target:"_blank",children:["  ",(0,s.jsx)("span",{children:n})," "]}):(0,s.jsxs)(c(),{href:r,children:["  ",(0,s.jsx)("span",{children:n})," "]}):o?(0,s.jsxs)(c(),{className:"__container",href:"#",onClick:o,children:[" ",(0,s.jsx)("span",{children:n}),"  "]}):(0,s.jsxs)(c(),{href:"#",className:"__container",children:["  ",(0,s.jsx)("span",{children:n})," "]}),(0,s.jsx)("div",{className:l().button,children:t})}},5942:function(e){e.exports={button:"button_button__eJLCR"}},3637:function(e){e.exports={main:"backoffice_main__2YuYo",hero:"backoffice_hero__qqhcl",BackofficeContent:"backoffice_BackofficeContent__6HXzy",tabs:"backoffice_tabs__5WaXj"}}},function(e){e.O(0,[629,253,488,744],function(){return e(e.s=3618)}),_N_E=e.O()}]);