(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2921:function(e,n,t){Promise.resolve().then(t.bind(t,2861))},52:function(e,n,t){"use strict";t.r(n);var r=t(7437),s=t(1693),a=t.n(s),l=t(1396),i=t.n(l);n.default=function(e){var n;let{children:t,link:s,external:l,inline:c,clickHandler:o,small:d,main:u,disabled:f,inverted:m}=e;return n=s?l?(0,r.jsxs)("a",{href:s,target:"_blank",children:["  ",(0,r.jsx)("span",{children:t})," "]}):(0,r.jsxs)(i(),{href:s,children:["  ",(0,r.jsx)("span",{children:t})," "]}):o?(0,r.jsxs)(i(),{className:"__container",href:"#",onClick:o,children:[" ",(0,r.jsx)("span",{children:t}),"  "]}):(0,r.jsxs)(i(),{href:"#",className:"__container",children:["  ",(0,r.jsx)("span",{children:t})," "]}),(0,r.jsx)("div",{className:a().button,children:n})}},2861:function(e,n,t){"use strict";let r;t.r(n),t.d(n,{default:function(){return M}});var s=t(7437),a=t(9617),l=t.n(a),i=t(2265),c=t(558),o=t.n(c),d=t(52),u=function(e){let{id:n,name:t,type:r,installInfra:a,debug:l,status:c,synced:u,vclusterRef:f,secretRef:m,handleDelete:p}=e,[h,v]=(0,i.useState)(!1),b=()=>{h?v(!1):v(!0)};return(0,s.jsxs)("div",{onClick:()=>b(),className:"".concat(o().EnvironmentItem,"  ").concat(h?o().open:" "," "),children:[(0,s.jsxs)("div",{className:o().openTag,children:[!h&&(0,s.jsx)(s.Fragment,{children:"Click for details"}),h&&(0,s.jsx)(s.Fragment,{children:"Close"})]}),(0,s.jsxs)("div",{className:o().header,children:[(0,s.jsxs)("h5",{children:[" ",(0,s.jsx)("span",{children:"Environment:"})," ",t]}),(0,s.jsxs)("div",{className:o().headerStatus,children:[(0,s.jsxs)("div",{className:"".concat(o().headerStatusTag,"  ").concat(o().approved," "),children:["Synced: ",u]}),(0,s.jsxs)("div",{className:"".concat(o().headerStatusTag,"  ").concat(o().approved," "),children:["Ready: ",c," "]})]})]}),(0,s.jsxs)("div",{className:o().description,children:[(0,s.jsxs)("div",{className:o().descriptionTo,children:[(0,s.jsx)("span",{children:"Type:"})," ",r]}),(0,s.jsxs)("div",{className:o().descriptionSubject,children:[(0,s.jsx)("span",{children:" Install Infrastructure:"})," ",a.toString()]}),(0,s.jsxs)("div",{className:o().descriptionSubject,children:[(0,s.jsx)("span",{children:" Frontend Debug:"})," ",l.toString()]}),(0,s.jsxs)("div",{children:["True"!=c&&(0,s.jsx)("p",{children:"Waiting for the Environment to be Ready."}),"True"==c&&null!=f&&(0,s.jsxs)("p",{children:["Connect to this environment running ",(0,s.jsxs)("b",{children:["`vcluster connect ",f," --server https://localhost:8443 -- zsh`"]})," "]}),"True"==c&&null!=m&&(0,s.jsxs)("p",{children:["Use the secret called ",(0,s.jsxs)("b",{children:["`",m,"`"]})," to connect"]})]}),(0,s.jsx)("div",{children:(0,s.jsx)(d.default,{clickHandler:()=>p(t),children:"Delete"})})]})]})},f=function(){let[e,n]=(0,i.useState)(!1),[t,r]=(0,i.useState)(!1),[a,l]=(0,i.useState)([]),[c,d]=(0,i.useState)(0),f=e=>{n(!0),r(!1),console.log("Deleting Environment ..."+e),fetch("/api/environments/"+e,{method:"DELETE",headers:{accept:"application/json"}}).then(e=>e.json()).then(()=>{m(filter),n(!1)}).catch(e=>{console.log(e),n(!1),r(!0)})},m=()=>{fetch("/api/environments/").then(e=>e.json()).then(e=>{console.log("Fetching Environments ..."),l(e),n(!1)}).catch(e=>{console.log(e)})};return(0,i.useEffect)(()=>{let e=setInterval(()=>{n(!0),m()},3e3);return()=>clearInterval(e)},[c]),(0,i.useEffect)(()=>{n(!0),m()},[]),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:o().EnvironmentList,children:[a&&a.map((e,n)=>(0,s.jsx)(u,{id:e.metadata.uid,name:e.metadata.name,type:e.spec.compositionSelector.matchLabels.type,installInfra:e.spec.parameters.installInfra,debug:e.spec.parameters.frontend.debug,status:e.status.conditions[1].status,synced:e.status.conditions[0].status,vclusterRef:e.spec.resourceRef.name,secretRef:e.spec.writeConnectionSecretToRef.name,handleDelete:f},e.metadata.uid)),a&&0===a.length&&(0,s.jsx)("span",{children:"There are no environments."})]})})},m=t(6782),p=t.n(m),h=t(2658),v=t.n(h);function b(e){let{label:n,id:t,name:r,value:a}=e;return(0,s.jsxs)("div",{className:v().textfield,children:[(0,s.jsx)("label",{children:n}),(0,s.jsx)("input",{type:"text",id:t,name:r,value:a})]})}var x=function(){let[e,n]=(0,i.useState)(!1),[t,r]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),[c,o]=(0,i.useState)(""),[u,f]=(0,i.useState)(""),[m,h]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1);return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:p().EventsList,children:[!a&&(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{label:"Name",id:"name",name:"name"}),(0,s.jsx)(b,{label:"Type",id:"type",name:"type"}),(0,s.jsx)(b,{label:"Install Infrastructure",id:"installInfra",name:"installInfra"}),(0,s.jsx)(b,{label:"Frontend Debug",id:"debug",name:"debug"}),t&&(0,s.jsx)("small",{className:"mt-3 d-inline-block text-danger",children:"Something went wrong. Please try again later."}),(0,s.jsx)(d.default,{type:"submit",clickHandler:()=>{n(!0),r(!1);let e={name:document.getElementById("name").value,parameters:{type:document.getElementById("type").value,installInfra:"true"===document.getElementById("installInfra").value.toLowerCase(),frontend:{debug:"true"===document.getElementById("debug").value.toLowerCase()}}};console.log("Sending Post!"+JSON.stringify(e));try{fetch("/api/environments/",{method:"POST",body:JSON.stringify(e),headers:{accept:"application/json"}}).then(e=>e.json()).then(e=>{o(""),f(""),h(""),x(""),n(!1),l(!0)})}catch(e){n(!1),r(!0)}},children:"Create New Environment"})]}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{children:"Thanks for creating an new Environment with us!"}),(0,s.jsx)(d.default,{clickHandler:()=>{l(!1)},children:"Create another Environment"})]})]})})};function _(e){return n=>!!n.type&&n.type.tabsRole===e}let j=_("Tab"),g=_("TabList"),y=_("TabPanel");function E(e,n){return i.Children.map(e,e=>null===e?null:j(e)||g(e)||y(e)?n(e):e.props&&e.props.children&&"object"==typeof e.props.children?(0,i.cloneElement)(e,{...e.props,children:E(e.props.children,n)}):e)}var N=function(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=function e(n){var t,r,s="";if("string"==typeof n||"number"==typeof n)s+=n;else if("object"==typeof n){if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]&&(r=e(n[t]))&&(s&&(s+=" "),s+=r);else for(t in n)n[t]&&(s&&(s+=" "),s+=t)}return s}(e))&&(r&&(r+=" "),r+=n);return r};function C(e){let n=0;return!function e(n,t){return i.Children.forEach(n,n=>{null!==n&&(j(n)||y(n)?t(n):n.props&&n.props.children&&"object"==typeof n.props.children&&(g(n)&&t(n),e(n.props.children,t)))})}(e,e=>{j(e)&&n++}),n}function T(e){return e&&"getAttribute"in e}function S(e){return T(e)&&e.getAttribute("data-rttab")}function k(e){return T(e)&&"true"===e.getAttribute("aria-disabled")}let w={className:"react-tabs",focus:!1},I=e=>{let n=(0,i.useRef)([]),t=(0,i.useRef)([]),s=(0,i.useRef)();function a(n,t){if(n<0||n>=o())return;let{onSelect:r,selectedIndex:s}=e;r(n,s,t)}function l(e){let n=o();for(let t=e+1;t<n;t++)if(!k(d(t)))return t;for(let n=0;n<e;n++)if(!k(d(n)))return n;return e}function c(e){let n=e;for(;n--;)if(!k(d(n)))return n;for(n=o();n-- >e;)if(!k(d(n)))return n;return e}function o(){let{children:n}=e;return C(n)}function d(e){return n.current[`tabs-${e}`]}function u(e){let n=e.target;do if(f(n)){if(k(n))return;let t=[].slice.call(n.parentNode.children).filter(S).indexOf(n);a(t,e);return}while(null!=(n=n.parentNode))}function f(e){if(!S(e))return!1;let n=e.parentElement;do{if(n===s.current)return!0;if(n.getAttribute("data-rttabs"))break;n=n.parentElement}while(n);return!1}let{children:m,className:p,disabledTabClassName:h,domRef:v,focus:b,forceRenderTabPanel:x,onSelect:_,selectedIndex:T,selectedTabClassName:I,selectedTabPanelClassName:R,environment:L,disableUpDownKeys:O,disableLeftRightKeys:A,...B}={...w,...e};return i.createElement("div",Object.assign({},B,{className:N(p),onClick:u,onKeyDown:function(n){let{direction:t,disableUpDownKeys:r,disableLeftRightKeys:s}=e;if(f(n.target)){let{selectedIndex:i}=e,f=!1,m=!1;("Space"===n.code||32===n.keyCode||"Enter"===n.code||13===n.keyCode)&&(f=!0,m=!1,u(n)),(s||37!==n.keyCode&&"ArrowLeft"!==n.code)&&(r||38!==n.keyCode&&"ArrowUp"!==n.code)?(s||39!==n.keyCode&&"ArrowRight"!==n.code)&&(r||40!==n.keyCode&&"ArrowDown"!==n.code)?35===n.keyCode||"End"===n.code?(i=function(){let e=o();for(;e--;)if(!k(d(e)))return e;return null}(),f=!0,m=!0):(36===n.keyCode||"Home"===n.code)&&(i=function(){let e=o();for(let n=0;n<e;n++)if(!k(d(n)))return n;return null}(),f=!0,m=!0):(i="rtl"===t?c(i):l(i),f=!0,m=!0):(i="rtl"===t?l(i):c(i),f=!0,m=!0),f&&n.preventDefault(),m&&a(i,n)}},ref:e=>{s.current=e,v&&v(e)},"data-rttabs":!0}),function(){let s=0,{children:a,disabledTabClassName:l,focus:c,forceRenderTabPanel:u,selectedIndex:f,selectedTabClassName:m,selectedTabPanelClassName:p,environment:h}=e;t.current=t.current||[];let v=t.current.length-o(),b=(0,i.useId)();for(;v++<0;)t.current.push(`${b}${t.current.length}`);return E(a,e=>{let a=e;if(g(e)){let s=0,o=!1;null==r&&function(e){let n=e||("undefined"!=typeof window?window:void 0);try{r=!!(void 0!==n&&n.document&&n.document.activeElement)}catch(e){r=!1}}(h);let u=h||("undefined"!=typeof window?window:void 0);r&&u&&(o=i.Children.toArray(e.props.children).filter(j).some((e,n)=>u.document.activeElement===d(n))),a=(0,i.cloneElement)(e,{children:E(e.props.children,e=>{let r=`tabs-${s}`,a=f===s,d={tabRef:e=>{n.current[r]=e},id:t.current[s],selected:a,focus:a&&(c||o)};return m&&(d.selectedClassName=m),l&&(d.disabledClassName=l),s++,(0,i.cloneElement)(e,d)})})}else if(y(e)){let n={id:t.current[s],selected:f===s};u&&(n.forceRender=u),p&&(n.selectedClassName=p),s++,a=(0,i.cloneElement)(e,n)}return a})}())};I.propTypes={};let R={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},L=e=>null===e.selectedIndex?1:0,O=(e,n)=>{},A=e=>{let{children:n,defaultFocus:t,defaultIndex:r,focusTabOnClick:s,onSelect:a,...l}={...R,...e},[c,o]=(0,i.useState)(t),[d]=(0,i.useState)(L(l)),[u,f]=(0,i.useState)(1===d?r||0:null);if((0,i.useEffect)(()=>{o(!1)},[]),1===d){let e=C(n);(0,i.useEffect)(()=>{if(null!=u){let n=Math.max(0,e-1);f(Math.min(u,n))}},[e])}O(l,d);let m={...e,...l};return m.focus=c,m.onSelect=(e,n,t)=>{("function"!=typeof a||!1!==a(e,n,t))&&(s&&o(!0),1===d&&f(e))},null!=u&&(m.selectedIndex=u),delete m.defaultFocus,delete m.defaultIndex,delete m.focusTabOnClick,i.createElement(I,m,n)};A.propTypes={},A.tabsRole="Tabs";let B={className:"react-tabs__tab-list"},$=e=>{let{children:n,className:t,...r}={...B,...e};return i.createElement("ul",Object.assign({},r,{className:N(t),role:"tablist"}),n)};$.tabsRole="TabList",$.propTypes={};let D="react-tabs__tab",F={className:D,disabledClassName:`${D}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${D}--selected`},P=e=>{let n=(0,i.useRef)(),{children:t,className:r,disabled:s,disabledClassName:a,focus:l,id:c,selected:o,selectedClassName:d,tabIndex:u,tabRef:f,...m}={...F,...e};return(0,i.useEffect)(()=>{o&&l&&n.current.focus()},[o,l]),i.createElement("li",Object.assign({},m,{className:N(r,{[d]:o,[a]:s}),ref:e=>{n.current=e,f&&f(e)},role:"tab",id:`tab${c}`,"aria-selected":o?"true":"false","aria-disabled":s?"true":"false","aria-controls":`panel${c}`,tabIndex:u||(o?"0":null),"data-rttab":!0}),t)};P.propTypes={},P.tabsRole="Tab";let H="react-tabs__tab-panel",U={className:H,forceRender:!1,selectedClassName:`${H}--selected`},K=e=>{let{children:n,className:t,forceRender:r,id:s,selected:a,selectedClassName:l,...c}={...U,...e};return i.createElement("div",Object.assign({},c,{className:N(t,{[l]:a}),role:"tabpanel",id:`panel${s}`,"aria-labelledby":`tab${s}`}),r||a?n:null)};function M(){let[e,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{n(!0),n(!1)},[]),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsx)("div",{className:"".concat(l().hero," "),children:(0,s.jsx)("div",{className:"grid content noMargin",children:(0,s.jsx)("div",{className:"col full",children:(0,s.jsx)("h3",{children:"Admin"})})})}),(0,s.jsx)("div",{className:"".concat(l().BackofficeContent," "),children:(0,s.jsx)("div",{className:"grid content noMargin",children:(0,s.jsx)("div",{className:"col full",children:(0,s.jsx)("div",{className:"".concat(l().tabs," "),children:(0,s.jsxs)(A,{children:[(0,s.jsxs)($,{children:[(0,s.jsx)(P,{children:"Environments"}),(0,s.jsx)(P,{children:"New Environment"})]}),(0,s.jsx)(K,{children:(0,s.jsx)(f,{})}),(0,s.jsx)(K,{children:(0,s.jsx)(x,{})})]})})})})})]})}K.tabsRole="TabPanel",K.propTypes={}},1693:function(e){e.exports={button:"button_button__zBiTp"}},2658:function(e){e.exports={textfield:"textfield_textfield__SB1o4"}},9617:function(e){e.exports={main:"backoffice_main__51xWt",hero:"backoffice_hero__Hwfjd",BackofficeContent:"backoffice_BackofficeContent__XwxMo",tabs:"backoffice_tabs__TzmKF"}},558:function(e){e.exports={EnvironmentList:"environments_EnvironmentList__K8mUk",EnvironmentItem:"environments_EnvironmentItem__P4LrH",openTag:"environments_openTag__GrStg",header:"environments_header__Vyto9",headerStatusTag:"environments_headerStatusTag__0knGk",approved:"environments_approved__9QqJe",rejected:"environments_rejected__s4wYr",description:"environments_description__iTznU",open:"environments_open__b5gp_",descriptionTo:"environments_descriptionTo__gCEoj",descriptionSubject:"environments_descriptionSubject__XNyT5",descriptionBody:"environments_descriptionBody__UeUxb"}},6782:function(e){e.exports={EventsList:"events_EventsList__H1Y8V",EventItem:"events_EventItem__Jg_Cn",openTag:"events_openTag__tx1uO",header:"events_header__K3j9x",description:"events_description__IXpCv",open:"events_open__wCFok",codeContainer:"events_codeContainer__qSoh1"}}},function(e){e.O(0,[176,971,596,744],function(){return e(e.s=2921)}),_N_E=e.O()}]);